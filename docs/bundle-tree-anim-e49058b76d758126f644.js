var Demo=function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){(function(e){for(var r=n(3),a="undefined"==typeof window?e:window,o=["moz","webkit"],i="AnimationFrame",l=a["request"+i],u=a["cancel"+i]||a["cancelRequest"+i],c=0;!l&&c<o.length;c++)l=a[o[c]+"Request"+i],u=a[o[c]+"Cancel"+i]||a[o[c]+"CancelRequest"+i];if(!l||!u){var s=0,f=0,h=[];l=function(t){if(0===h.length){var e=r(),n=Math.max(0,1e3/60-(e-s));s=n+e,setTimeout(function(){var t=h.slice(0);h.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(s)}catch(t){setTimeout(function(){throw t},0)}},Math.round(n))}return h.push({handle:++f,callback:t,cancelled:!1}),f},u=function(t){for(var e=0;e<h.length;e++)h[e].handle===t&&(h[e].cancelled=!0)}}t.exports=function(t){return l.call(a,t)},t.exports.cancel=function(){u.apply(a,arguments)},t.exports.polyfill=function(t){t||(t=a),t.requestAnimationFrame=l,t.cancelAnimationFrame=u}}).call(this,n(2))},function(t,e){function n(t,e,n){var r,a,o,i,l;function u(){var c=Date.now()-i;c<e&&c>=0?r=setTimeout(u,e-c):(r=null,n||(l=t.apply(o,a),o=a=null))}null==e&&(e=100);var c=function(){o=this,a=arguments,i=Date.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(l=t.apply(o,a),o=a=null),l};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(l=t.apply(o,a),o=a=null,clearTimeout(r),r=null)},c}n.debounce=n,t.exports=n},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){(function(e){(function(){var n,r,a,o,i,l;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:null!=e&&e.hrtime?(t.exports=function(){return(n()-i)/1e6},r=e.hrtime,o=(n=function(){var t;return 1e9*(t=r())[0]+t[1]})(),l=1e9*e.uptime(),i=o-l):Date.now?(t.exports=function(){return Date.now()-a},a=Date.now()):(t.exports=function(){return(new Date).getTime()-a},a=(new Date).getTime())}).call(this)}).call(this,n(4))},function(t,e){var n,r,a=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(t){r=i}}();var u,c=[],s=!1,f=-1;function h(){s&&u&&(s=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!s){var t=l(h);s=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,s=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new m(t,e)),1!==c.length||s||l(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=2*Math.PI;function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=r/4;var i=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e;var n=e.segments,r=e.radiuses;if(n.length!==r.length)throw new Error("segments and radiuses must have the same number of elements");n.push(n[n.length-1]),r.push(1),this.points=[],this.tips=[];var i=a(e.start,3);!function t(e,n,r,a,i){var l=e.config,u=l.angle,c=l.segments,s=l.radiuses,f=Math.cos(a)*c[i],h=Math.sin(a)*c[i],d=n+Math.cos(a-o)*s[i],m=r+Math.sin(a-o)*s[i],v=n+f+Math.cos(a-o)*s[i+1],p=r+h+Math.sin(a-o)*s[i+1],g=i+1;if(e.points.push(d,m,i,v,p,g),g<c.length-1){var y=a-u*(.5+.5*Math.random()),w=a+u*(.5+.5*Math.random());t(e,n+f,r+h,y,g),t(e,n+f,r+h,w,g)}g===c.length-2&&e.tips.push({x:n+f,y:r+h});var b=n+Math.cos(a+o)*s[i],M=r+Math.sin(a+o)*s[i],T=n+f+Math.cos(a+o)*s[i+1],x=r+h+Math.sin(a+o)*s[i+1];e.points.push(T,x,g,b,M,i)}(this,i[0],i[1],i[2],0)},l=n(1),u=n.n(l),c=n(0),s=n.n(c),f=0,h=1,d=2,m=3,v=[m,m,f,f,f,h,h,h,d,d,d,m];var p=(1+Math.sqrt(5))/2,g=p*p,y=p*p*p,w=p*p*p*p,b=p*p*p*p*p,M={viewBox:"0 15 1000 1000",start:[500,1e3,-r/4],angle:.125*r,segments:[200,200/p,200/g,200/y,200/w,200/b],radiuses:[40,40/p,40/g,40/y,40/w,40/b],gravity:4,minLeaf:.2,maxLeaf:.6,numLeafs:[500,100,100,500],leafWindFactor:[.01,.01,.05,.02],windStrength:[.2,.1,.5,.01],horizon:.61,frostLimit:80,decayRate:13,decaySize:40,seasonLength:2700,fullCrownSize:75,fullOpacity:.4,minCrownSize:8,minOpacity:.3,initialSeason:v[(new Date).getMonth()],grassCount:100,grassLength:50};function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var x=.5*(Math.sqrt(3)-1),S=(3-Math.sqrt(3))/6,L=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e||(e=Math.random),this.p=D(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12;this.grad3=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),this.grad4=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0])}var e,n,r;return e=t,(n=[{key:"noise2D",value:function(t,e){var n,r,a=this.permMod12,o=this.perm,i=this.grad3,l=0,u=0,c=0,s=(t+e)*x,f=Math.floor(t+s),h=Math.floor(e+s),d=(f+h)*S,m=t-(f-d),v=e-(h-d);m>v?(n=1,r=0):(n=0,r=1);var p=m-n+S,g=v-r+S,y=m-1+2*S,w=v-1+2*S,b=255&f,M=255&h,T=.5-m*m-v*v;if(T>=0){var L=3*a[b+o[M]];l=(T*=T)*T*(i[L]*m+i[L+1]*v)}var D=.5-p*p-g*g;if(D>=0){var z=3*a[b+n+o[M+r]];u=(D*=D)*D*(i[z]*p+i[z+1]*g)}var C=.5-y*y-w*w;if(C>=0){var A=3*a[b+1+o[M+1]];c=(C*=C)*C*(i[A]*y+i[A+1]*w)}return 70*(l+u+c)}}])&&T(e.prototype,n),r&&T(e,r),t}();function D(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var r=e+1+~~(t()*(255-e)),a=n[e];n[e]=n[r],n[r]=a}return n}L._buildPermutationTable=D;var z,C,A,E,O,P,R,k,F,I=L,j=(n(5),0),q=1,_=2;var W,B,U=0,N=0,H=M.initialSeason,G=M.leafWindFactor[H],J=M.windStrength[H],K=new I,Q=4,V=new Float32Array(M.numLeafs.reduce(function(t,e){return Math.max(t,e)},0)*Q);function X(){document.body.className="season-"+H}function Y(t,e,n,a,o,i,l){var u=K.noise2D(1e-4*e+o,.001*n),c=K.noise2D(1e-4*n,.001*e);e+=c,n-=c;var s=u*r;t.save(),t.translate(e-32,n+(l?-B:0)-18),!i&&l||t.rotate(s);var f=M.minLeaf+a*(M.maxLeaf-M.minLeaf);t.scale(f,f),i?t.drawImage(R,0,0):l?t.fillRect(0,0,48,10):t.fillRect(0,0,24,24),t.restore()}function Z(){for(var t=Math.random()*(O-M.decaySize),e=Math.random()*(P-B-M.decaySize),n=k.getImageData(t,e,M.decaySize,M.decaySize),r=n.data.length,a=!1,o=0;o<r;o+=4){var i=n.data[o],l=n.data[o+1],u=n.data[o+2];255===n.data[o+3]?l>66&&(i<l?i+=6:((i>140||l<120)&&(i-=1),l-=1),n.data[o]=i,n.data[o+1]=l,a=!0):H<d&&i+u>l&&(n.data[o+3]-=8,a=!0)}a&&k.putImageData(n,t,e)}function $(t,e){var n=F,r=n.width,a=n.height,o=(n.colors,(r-1)*t|0),i=(a-1)*e|0;return F.colors[r*i+o]}function tt(){for(var t=M.grassLength,e=M.horizon,n=0;n<M.grassCount;n++){var a=Math.random()*O|0,o=Math.random(),i=(P*e|0)-B,l=i+(W.height-i)*o|0,u=K.noise2D(.01*a,.01*(l+n)),c=H===f?Math.min(1,3*U/M.seasonLength):1,s=(.5+.7*K.noise2D(.004*a,.04*l))*c,h=K.noise2D(5e-4*a,.004*l),d=Math.random(),m=r/4+u*r/16-r/32;k.strokeStyle=$(d,h),k.lineWidth=1+3*o,k.beginPath(),k.moveTo(a,l),k.lineTo(a+Math.cos(m)*t*s,l+Math.sin(m)*t*s),k.stroke()}k.opacity=1}function et(){var t=M.gravity,e=M.horizon,n=M.fullOpacity,a=M.fullCrownSize,o=M.minCrownSize,i=M.minOpacity,l=M.seasonLength;++U>l&&(U=0,H=H+1&3,X());var u=A,c=u.points,v=u.tips,p=Date.now()-E;C.clearRect(0,0,O,P),C.fillStyle="#90482a",C.beginPath();var g=100*Math.cos(3e-4*p),y=60*Math.cos(7e-4*p);C.moveTo(c[0],c[1]);for(var w=3;w<c.length;w+=3){var b=c[w],T=c[w+1],x=c[w+2],S=K.noise2D(.001*b+5e-4*p,.001*T)*(.05*x);C.lineTo(b+g*S,T+y*S)}if(C.fill(),H!==m){var L,D;if(H===h&&(L=M.fullCrownSize,D=M.fullOpacity),H===d){var z=Math.max(U/l*2-1,0);L=a-(a-o)*z,D=n-(n-i)*z}if(H===f){var R=1-Math.min(U/l*2,1);L=a-(a-o)*R,D=n-(n-i)*R}C.fillStyle="rgba(10,160,60,"+D+")";for(var F=0;F<v.length;F++){var I=v[F];C.beginPath(),C.moveTo(I.x,I.y);var B=K.noise2D(.001*I.x+5e-4*p,.001*I.y)*J;C.arc(I.x+g*B,I.y+y*B,L,0,r,!1),C.fill()}}if(k.fillStyle=C.fillStyle="rgba(255,255,255,0.9)",H!==h)for(var $=M.numLeafs[H]*Q,nt=0;nt<$;nt+=Q){var rt=V[nt]+g*G,at=V[nt+2],ot=V[nt+1],it=V[nt+3];if(it===_)if(H===d)it=V[nt+3]=j;else{if(H!==m)continue;it=V[nt+3]=q}var lt=it===j,ut=.5*at;if(rt<-64&&(rt+=O+128),rt>O+64&&(rt-=O+128),(ot+=2+t*ut+y*G*ut)>P+64&&(ot-=P+192),V[nt]=rt,V[nt+1]=ot,ot>-64){var ct=P*e+32|0,st=ot>ct+(P-ct)*at;Y(st?k:C,rt,ot,at,nt,lt,st),st&&(V[nt]=Math.random()*O,H===m?(V[nt+1]=lt?Math.random()*-P-P:-32,V[nt+3]=q,!lt&&N<M.frostLimit&&N++):H===d?(V[nt+1]=-32,V[nt+3]=j):(V[nt+1]=Math.random()*-P-P,V[nt+3]=_))}}if(H===d){for(var ft=0;ft<M.decayRate;ft++)Z();N=0}H===m&&N>=M.frostLimit&&0==(3&U)&&(k.fillStyle="rgba(255,255,255,0.006)",k.fillRect(0,32,O,W.height-32)),H===f&&(N<=0?(k.strokeWidth=2,tt()):N-=.3),J+=.05*(M.windStrength[H]-J),G+=.05*(M.leafWindFactor[H]-G),s()(et)}var nt=u()(function(){if(O=window.innerWidth-1|0,P=window.innerHeight-1|0,function(){for(var t=M.numLeafs,e=M.initialSeason,n=t[d]*Q,r=0;r<V.length;r+=Q){V[r]=Math.random()*O;var a=e<d?1:r<n?.5:1;V[r+1]=Math.random()*-P-a*P,V[r+2]=Math.random(),V[r+3]=e<d?_:e===d&&r<n?j:q}}(),z.width=O,z.height=P,B=P*M.horizon-32|0,console.log("size: ",O,"x",P,"decayStart",B),W.width=O,W.height=P-B,W.style.top=B+"px",k.fillStyle="rgba(53, 104, 45, 0.9)",k.fillRect(0,40,O,W.height),M.start[0]=O/2,M.start[1]=.75*P,A=new i(M),U=0,(H=M.initialSeason)!==f)for(var t=0;t<M.seasonLength/3;t++)tt();else k.fillStyle="rgba(255,255,255,0.95)",k.fillRect(0,32,O,W.height-32),N=M.frostLimit},150,!0);window.onload=function(){X(),z=document.getElementById("screen"),R=document.getElementById("leaf"),F=function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=r,e.className="offscreen",document.body.appendChild(e);var a=e.getContext("2d");a.drawImage(t,0,0);var o=a.getImageData(0,0,n,r);document.body.removeChild(e);for(var i=new Array(n*r),l=4*o.width,u=o.data,c=0,s=0;s<r;s++)for(var f=0;f<n;f++){var h=s*l+4*f;i[c++]="rgba("+u[h]+","+u[h+1]+","+u[h+2]+", 0.99)"}return{width:n,height:r,colors:i}}(document.getElementById("grass")),console.log({grassPalette:F}),C=z.getContext("2d"),(W=document.createElement("canvas")).id="bg",k=W.getContext("2d"),nt(),document.body.appendChild(W),window.addEventListener("resize",nt,!0),E=Date.now(),s()(et)}}]);
//# sourceMappingURL=bundle-tree-anim-e49058b76d758126f644.js.map