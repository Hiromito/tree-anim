{"version":3,"sources":["webpack://Demo/webpack/bootstrap","webpack://Demo/./node_modules/raf/index.js","webpack://Demo/./node_modules/debounce/index.js","webpack://Demo/(webpack)/buildin/global.js","webpack://Demo/./node_modules/performance-now/lib/performance-now.js","webpack://Demo/./node_modules/process/browser.js","webpack://Demo/./src/math.js","webpack://Demo/./src/Tree.js","webpack://Demo/./src/seasons.js","webpack://Demo/./src/config.js","webpack://Demo/./src/noise.js","webpack://Demo/./src/index.js","webpack://Demo/./src/particle-modes.js","webpack://Demo/./src/loadGrassPalette.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","global","now","root","window","vendors","suffix","raf","caf","length","last","id","queue","callback","_now","next","Math","max","setTimeout","cp","slice","cancelled","e","round","push","handle","fn","cancel","apply","arguments","polyfill","requestAnimationFrame","cancelAnimationFrame","debounce","func","wait","immediate","timeout","args","context","timestamp","result","later","Date","debounced","this","callNow","clear","clearTimeout","flush","g","Function","process","getNanoSeconds","hrtime","loadTime","moduleLoadTime","nodeLoadTime","upTime","performance","hr","uptime","getTime","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","len","run","marker","runClearTimeout","Item","array","noop","nextTick","Array","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","TAU","PI","RIGHT_ANGLE","Tree","config","_classCallCheck","segments","radiuses","points","tips","_config$start","_slicedToArray","start","collectPoints","tree","x","y","angle","depth","_tree$config","angleDelta","upX","cos","upY","sin","x1","y1","x2","y2","nextDepth","angleLeft","random","angleRight","x4","y4","x3","y3","SPRING","SUMMER","AUTUMN","WINTER","SEASON_FOR_MONTH","sqrt","r2","r3","r4","r5","viewBox","gravity","minLeaf","maxLeaf","numLeafs","leafWindFactor","windStrength","horizon","frostLimit","decayRate","decaySize","seasonLength","fullCrownSize","fullOpacity","minCrownSize","minOpacity","initialSeason","getMonth","grassCount","grassLength","F2","G2","SimplexNoise","noise_classCallCheck","buildPermutationTable","perm","Uint8Array","permMod12","grad3","Float32Array","grad4","xin","yin","i1","j1","n0","n1","n2","floor","j","x0","y0","ii","jj","t0","gi0","t1","gi1","t2","gi2","aux","_buildPermutationTable","canvas","ctx","width","height","leaf","bgContext","grassPalette","LEAF","SNOW","LOCKED","background","decayStart","seasonCount","frost","season","noise","LEAF_SIZE","leafs","reduce","a","b","updateSeason","document","body","className","drawLeafOrSnow","z","isLeaf","didHitGround","rnd0","noise2D","rnd1","save","translate","rotate","scale","drawImage","fillRect","restore","decayBackground","imageData","getImageData","dataWidth","data","changed","putImageData","lookupGrassStyle","_grassPalette","colors","drawGrass","horizonY","angleNoise","seasonMultiplier","min","lengthNoise","c2","c1","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","opacity","render","_tree","time","clearRect","fillStyle","windX","windY","factor","fill","crownSize","crownOpacity","seasonRatio","tip","arc","particlesPerSeason","code","depthFactor","strokeWidth","resizeCanvasToScreen","innerWidth","innerHeight","autommLeavesCount","space","initLeafs","console","log","style","top","onload","getElementById","img","createElement","appendChild","getContext","removeChild","index","loadGrassPalette","addEventListener"],"mappings":"qBACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA0DA,OArDAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,sBClFA,SAAAC,GAOA,IAPA,IAAAC,EAAUrC,EAAQ,GAClBsC,EAAA,oBAAAC,OAAAH,EAAAG,OACAC,EAAA,iBACAC,EAAA,iBACAC,EAAAJ,EAAA,UAAAG,GACAE,EAAAL,EAAA,SAAAG,IAAAH,EAAA,gBAAAG,GAEArC,EAAA,GAAcsC,GAAAtC,EAAAoC,EAAAI,OAA4BxC,IAC1CsC,EAAAJ,EAAAE,EAAApC,GAAA,UAAAqC,GACAE,EAAAL,EAAAE,EAAApC,GAAA,SAAAqC,IACAH,EAAAE,EAAApC,GAAA,gBAAAqC,GAIA,IAAAC,IAAAC,EAAA,CACA,IAAAE,EAAA,EACAC,EAAA,EACAC,EAAA,GAGAL,EAAA,SAAAM,GACA,OAAAD,EAAAH,OAAA,CACA,IAAAK,EAAAZ,IACAa,EAAAC,KAAAC,IAAA,EALA,QAKAH,EAAAJ,IACAA,EAAAK,EAAAD,EACAI,WAAA,WACA,IAAAC,EAAAP,EAAAQ,MAAA,GAIAR,EAAAH,OAAA,EACA,QAAAxC,EAAA,EAAsBA,EAAAkD,EAAAV,OAAexC,IACrC,IAAAkD,EAAAlD,GAAAoD,UACA,IACAF,EAAAlD,GAAA4C,SAAAH,GACa,MAAAY,GACbJ,WAAA,WAAqC,MAAAI,GAAU,KAIxCN,KAAAO,MAAAR,IAOP,OALAH,EAAAY,KAAA,CACAC,SAAAd,EACAE,WACAQ,WAAA,IAEAV,GAGAH,EAAA,SAAAiB,GACA,QAAAxD,EAAA,EAAkBA,EAAA2C,EAAAH,OAAkBxC,IACpC2C,EAAA3C,GAAAwD,aACAb,EAAA3C,GAAAoD,WAAA,IAMArD,EAAAD,QAAA,SAAA2D,GAIA,OAAAnB,EAAAnC,KAAA+B,EAAAuB,IAEA1D,EAAAD,QAAA4D,OAAA,WACAnB,EAAAoB,MAAAzB,EAAA0B,YAEA7D,EAAAD,QAAA+D,SAAA,SAAAnC,GACAA,IACAA,EAAAQ,GAEAR,EAAAoC,sBAAAxB,EACAZ,EAAAqC,qBAAAxB,oCC3DA,SAAAyB,EAAAC,EAAAC,EAAAC,GACA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAGA,SAAAC,IACA,IAAAhC,EAAAiC,KAAAzC,MAAAsC,EAEA9B,EAAAyB,GAAAzB,GAAA,EACA2B,EAAAnB,WAAAwB,EAAAP,EAAAzB,IAEA2B,EAAA,KACAD,IACAK,EAAAP,EAAAN,MAAAW,EAAAD,GACAC,EAAAD,EAAA,OAXA,MAAAH,MAAA,KAgBA,IAAAS,EAAA,WACAL,EAAAM,KACAP,EAAAT,UACAW,EAAAG,KAAAzC,MACA,IAAA4C,EAAAV,IAAAC,EAOA,OANAA,MAAAnB,WAAAwB,EAAAP,IACAW,IACAL,EAAAP,EAAAN,MAAAW,EAAAD,GACAC,EAAAD,EAAA,MAGAG,GAoBA,OAjBAG,EAAAG,MAAA,WACAV,IACAW,aAAAX,GACAA,EAAA,OAIAO,EAAAK,MAAA,WACAZ,IACAI,EAAAP,EAAAN,MAAAW,EAAAD,GACAC,EAAAD,EAAA,KAEAU,aAAAX,GACAA,EAAA,OAIAO,EAIAX,aAEAjE,EAAAD,QAAAkE,iBCrEA,IAAAiB,EAGAA,EAAA,WACA,OAAAL,KADA,GAIA,IAEAK,KAAA,IAAAC,SAAA,iBACC,MAAA7B,GAED,iBAAAlB,SAAA8C,EAAA9C,QAOApC,EAAAD,QAAAmF,oBCnBA,SAAAE,IACA,WACA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAEA,oBAAAC,aAAA,OAAAA,yBAAAzD,IACAlC,EAAAD,QAAA,WACA,OAAA4F,YAAAzD,OAEG,MAAAkD,KAAAE,QACHtF,EAAAD,QAAA,WACA,OAAAsF,IAAAI,GAAA,KAEAH,EAAAF,EAAAE,OAMAE,GALAH,EAAA,WACA,IAAAO,EAEA,YADAA,EAAAN,KACA,GAAAM,EAAA,OAGAF,EAAA,IAAAN,EAAAS,SACAJ,EAAAD,EAAAE,GACGf,KAAAzC,KACHlC,EAAAD,QAAA,WACA,OAAA4E,KAAAzC,MAAAqD,GAEAA,EAAAZ,KAAAzC,QAEAlC,EAAAD,QAAA,WACA,WAAA4E,MAAAmB,UAAAP,GAEAA,GAAA,IAAAZ,MAAAmB,aAGC1F,KAAAyE,uCChCD,IAOAkB,EACAC,EARAZ,EAAApF,EAAAD,QAAA,GAUA,SAAAkG,IACA,UAAAC,MAAA,mCAEA,SAAAC,IACA,UAAAD,MAAA,qCAsBA,SAAAE,EAAAC,GACA,GAAAN,IAAA7C,WAEA,OAAAA,WAAAmD,EAAA,GAGA,IAAAN,IAAAE,IAAAF,IAAA7C,WAEA,OADA6C,EAAA7C,WACAA,WAAAmD,EAAA,GAEA,IAEA,OAAAN,EAAAM,EAAA,GACK,MAAA/C,GACL,IAEA,OAAAyC,EAAA3F,KAAA,KAAAiG,EAAA,GACS,MAAA/C,GAET,OAAAyC,EAAA3F,KAAAyE,KAAAwB,EAAA,MAvCA,WACA,IAEAN,EADA,mBAAA7C,WACAA,WAEA+C,EAEK,MAAA3C,GACLyC,EAAAE,EAEA,IAEAD,EADA,mBAAAhB,aACAA,aAEAmB,EAEK,MAAA7C,GACL0C,EAAAG,GAjBA,GAwEA,IAEAG,EAFA1D,EAAA,GACA2D,GAAA,EAEAC,GAAA,EAEA,SAAAC,IACAF,GAAAD,IAGAC,GAAA,EACAD,EAAA7D,OACAG,EAAA0D,EAAAI,OAAA9D,GAEA4D,GAAA,EAEA5D,EAAAH,QACAkE,KAIA,SAAAA,IACA,IAAAJ,EAAA,CAGA,IAAAlC,EAAA+B,EAAAK,GACAF,GAAA,EAGA,IADA,IAAAK,EAAAhE,EAAAH,OACAmE,GAAA,CAGA,IAFAN,EAAA1D,EACAA,EAAA,KACA4D,EAAAI,GACAN,GACAA,EAAAE,GAAAK,MAGAL,GAAA,EACAI,EAAAhE,EAAAH,OAEA6D,EAAA,KACAC,GAAA,EAnEA,SAAAO,GACA,GAAAd,IAAAhB,aAEA,OAAAA,aAAA8B,GAGA,IAAAd,IAAAG,IAAAH,IAAAhB,aAEA,OADAgB,EAAAhB,aACAA,aAAA8B,GAEA,IAEAd,EAAAc,GACK,MAAAxD,GACL,IAEA,OAAA0C,EAAA5F,KAAA,KAAA0G,GACS,MAAAxD,GAGT,OAAA0C,EAAA5F,KAAAyE,KAAAiC,KAgDAC,CAAA1C,IAiBA,SAAA2C,EAAAX,EAAAY,GACApC,KAAAwB,MACAxB,KAAAoC,QAYA,SAAAC,KA5BA9B,EAAA+B,SAAA,SAAAd,GACA,IAAA/B,EAAA,IAAA8C,MAAAvD,UAAApB,OAAA,GACA,GAAAoB,UAAApB,OAAA,EACA,QAAAxC,EAAA,EAAuBA,EAAA4D,UAAApB,OAAsBxC,IAC7CqE,EAAArE,EAAA,GAAA4D,UAAA5D,GAGA2C,EAAAY,KAAA,IAAAwD,EAAAX,EAAA/B,IACA,IAAA1B,EAAAH,QAAA8D,GACAH,EAAAO,IASAK,EAAAnF,UAAAgF,IAAA,WACAhC,KAAAwB,IAAAzC,MAAA,KAAAiB,KAAAoC,QAEA7B,EAAAiC,MAAA,UACAjC,EAAAkC,SAAA,EACAlC,EAAAmC,IAAA,GACAnC,EAAAoC,KAAA,GACApC,EAAAqC,QAAA,GACArC,EAAAsC,SAAA,GAIAtC,EAAAuC,GAAAT,EACA9B,EAAAwC,YAAAV,EACA9B,EAAAyC,KAAAX,EACA9B,EAAA0C,IAAAZ,EACA9B,EAAA2C,eAAAb,EACA9B,EAAA4C,mBAAAd,EACA9B,EAAA6C,KAAAf,EACA9B,EAAA8C,gBAAAhB,EACA9B,EAAA+C,oBAAAjB,EAEA9B,EAAAgD,UAAA,SAAA5H,GAAqC,UAErC4E,EAAAiD,QAAA,SAAA7H,GACA,UAAA0F,MAAA,qCAGAd,EAAAkD,IAAA,WAA2B,WAC3BlD,EAAAmD,MAAA,SAAAC,GACA,UAAAtC,MAAA,mCAEAd,EAAAqD,MAAA,WAA4B,iECtLrB,IAAMC,EAAgB,EAAV1F,KAAK2F,qZCExB,IAAMC,EAAcF,EAAM,MAsDLG,EAEjB,SAAAA,EAAYC,gGACZC,CAAAlE,KAAAgE,GACIhE,KAAKiE,OAASA,EADlB,IAIYE,EAAuBF,EAAvBE,SAAUC,EAAaH,EAAbG,SAElB,GAAID,EAASvG,SAAWwG,EAASxG,OAE7B,MAAM,IAAIyD,MAAM,+DAGpB8C,EAASxF,KAAKwF,EAASA,EAASvG,OAAS,IACzCwG,EAASzF,KAAK,GAEdqB,KAAKqE,OAAS,GACdrE,KAAKsE,KAAO,GAfhB,IAAAC,EAAAC,EAiB2BP,EAAOQ,MAjBlC,IAvDJ,SAASC,EAAcC,EAAMC,EAAGC,EAAGC,EAAOC,GAC1C,IAAAC,EAEuDL,EAAKV,OAAxCgB,EAFpBD,EAEYF,MAAoBX,EAFhCa,EAEgCb,SAAUC,EAF1CY,EAE0CZ,SAEhCc,EAAM/G,KAAKgH,IAAKL,GAASX,EAASY,GAClCK,EAAMjH,KAAKkH,IAAKP,GAASX,EAASY,GAElCO,EAAKV,EAAIzG,KAAKgH,IAAKL,EAAQf,GAAeK,EAASW,GACnDQ,EAAKV,EAAI1G,KAAKkH,IAAKP,EAAQf,GAAeK,EAASW,GACnDS,EAAKZ,EAAIM,EAAM/G,KAAKgH,IAAKL,EAAQf,GAAeK,EAASW,EAAQ,GACjEU,EAAKZ,EAAIO,EAAMjH,KAAKkH,IAAKP,EAAQf,GAAeK,EAASW,EAAQ,GAEjEW,EAAYX,EAAQ,EAM1B,GALAJ,EAAKN,OAAO1F,KACR2G,EAAGC,EAAIR,EACPS,EAAGC,EAAIC,GAGPA,EAAYvB,EAASvG,OAAS,EAClC,CAEI,IAAM+H,EAAYb,EAAQG,GAAc,GAAsB,GAAhB9G,KAAKyH,UAC7CC,EAAaf,EAAQG,GAAc,GAAsB,GAAhB9G,KAAKyH,UAEpDlB,EAAcC,EAAMC,EAAIM,EAAKL,EAAIO,EAAKO,EAAWD,GACjDhB,EAAcC,EAAMC,EAAIM,EAAKL,EAAIO,EAAKS,EAAYH,GAIlDA,IAAcvB,EAASvG,OAAS,GAEhC+G,EAAKL,KAAK3F,KACN,CACIiG,EAAEA,EAAIM,EACNL,EAAEA,EAAIO,IAKlB,IAAMU,EAAKlB,EAAIzG,KAAKgH,IAAKL,EAAQf,GAAeK,EAASW,GACnDgB,EAAKlB,EAAI1G,KAAKkH,IAAKP,EAAQf,GAAeK,EAASW,GACnDiB,EAAKpB,EAAIM,EAAM/G,KAAKgH,IAAKL,EAAQf,GAAeK,EAASW,EAAQ,GACjEkB,EAAKpB,EAAIO,EAAMjH,KAAKkH,IAAKP,EAAQf,GAAeK,EAASW,EAAQ,GAEvEJ,EAAKN,OAAO1F,KACRqH,EAAGC,EAAIP,EACPI,EAAGC,EAAIhB,GA2BPL,CAAc1E,KAnBlBuE,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAmBqC,oCC/E5B2B,EAAS,EACTC,EAAS,EACTC,EAAS,EACTC,EAAS,EAEhBC,EAAmB,CACrBD,EACAA,EACAH,EACAA,EACAA,EACAC,EACAA,EACAA,EACAC,EACAA,EACAA,EACAC,GCdJ,IAAMnK,GAAK,EAAEiC,KAAKoI,KAAK,IAAI,EACrBC,EAAKtK,EAAEA,EACPuK,EAAKvK,EAAEA,EAAEA,EACTwK,EAAKxK,EAAEA,EAAEA,EAAEA,EACXyK,EAAKzK,EAAEA,EAAEA,EAAEA,EAAEA,EAKH+H,EAAA,CAGZ2C,QAAS,iBAETnC,MAAO,CAAC,IAAI,KAAOZ,EAAM,GAEzBiB,MAAa,KAANjB,EAEPM,SAAU,CAZF,QAYcjI,EAZd,IAYuBsK,EAZvB,IAYiCC,EAZjC,IAY0CC,EAZ1C,IAYkDC,GAC1DvC,SAAU,CAZA,MAYgBlI,EAZhB,GAY2BsK,EAZ3B,GAYuCC,EAZvC,GAYkDC,EAZlD,GAY4DC,GAEtEE,QAAS,EAETC,QAAS,GACTC,QAAS,GAETC,SAAU,CAAC,IAAI,IAAK,IAAK,KACzBC,eAAgB,CAAC,IAAK,IAAK,IAAK,KAEhCC,aAAc,CAAE,GAAK,GAAK,GAAK,KAC/BC,QAAS,IAETC,WAAY,GAGZC,UAAW,GAEXC,UAAW,GAEXC,aAAc,KAEdC,cAAe,GACfC,YAAa,GACbC,aAAc,EACdC,WAAY,GAEZC,cD3BOtB,GAAkB,IAAIxG,MAAO+H,YC6BpCC,WAAY,IACZC,YAAa,0KClBjB,IAAMC,EAAK,IAAO7J,KAAKoI,KAAK,GAAO,GAC7B0B,GAAM,EAAM9J,KAAKoI,KAAK,IAAQ,EAE9B2B,aACF,SAAAA,EAAYtC,gGACZuC,CAAAnI,KAAAkI,GACStC,IAEDA,EAASzH,KAAKyH,QAElB5F,KAAK9C,EAAIkL,EAAsBxC,GAC/B5F,KAAKqI,KAAO,IAAIC,WAAW,KAC3BtI,KAAKuI,UAAY,IAAID,WAAW,KAChC,IAAK,IAAIlN,EAAI,EAAGA,EAAI,IAAKA,IAErB4E,KAAKqI,KAAKjN,GAAK4E,KAAK9C,EAAM,IAAJ9B,GACtB4E,KAAKuI,UAAUnN,GAAK4E,KAAKqI,KAAKjN,GAAK,GAEvC4E,KAAKwI,MAAQ,IAAIC,aAAa,CAAC,EAAG,EAAG,GAChC,EAAG,EAAG,EACP,GAAI,EAAG,GAEN,GAAI,EAAG,EACR,EAAG,EAAG,GACL,EAAG,EAAG,EAEP,EAAG,GAAI,GACN,EAAG,GAAI,EACR,EAAG,EAAG,EAEN,GAAI,EAAG,EACP,EAAG,GAAI,EACP,GAAI,GAAI,IACZzI,KAAK0I,MAAQ,IAAID,aAAa,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,EAC5E,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,EACrD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,GAChD,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,EACrD,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,GAChD,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,GAAI,EACrD,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,GAChD,EAAG,EAAG,EAAG,GAAI,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,GAAI,GAAI,EAAG,2DAIrDE,EAAKC,GAET,IAiBIC,EAAIC,EAjBFP,EAAYvI,KAAKuI,UACjBF,EAAOrI,KAAKqI,KACZG,EAAQxI,KAAKwI,MACfO,EAAK,EACLC,EAAK,EACLC,EAAK,EAEH9L,GAAKwL,EAAMC,GAAOZ,EAClB5M,EAAI+C,KAAK+K,MAAMP,EAAMxL,GACrBgM,EAAIhL,KAAK+K,MAAMN,EAAMzL,GACrBb,GAAKlB,EAAI+N,GAAKlB,EAGdmB,EAAKT,GAFAvN,EAAIkB,GAGT+M,EAAKT,GAFAO,EAAI7M,GAMX8M,EAAKC,GAELR,EAAK,EACLC,EAAK,IAILD,EAAK,EACLC,EAAK,GAKT,IAAMxD,EAAK8D,EAAKP,EAAKZ,EACf1C,EAAK8D,EAAKP,EAAKb,EACfzC,EAAK4D,EAAK,EAAM,EAAMnB,EACtBxC,EAAK4D,EAAK,EAAM,EAAMpB,EAEtBqB,EAAS,IAAJlO,EACLmO,EAAS,IAAJJ,EAEPK,EAAK,GAAMJ,EAAKA,EAAKC,EAAKA,EAC9B,GAAIG,GAAM,EACV,CACI,IAAMC,EAAiC,EAA3BlB,EAAUe,EAAKjB,EAAKkB,IAEhCR,GADAS,GAAMA,GACIA,GAAMhB,EAAMiB,GAAOL,EAAKZ,EAAMiB,EAAM,GAAKJ,GAEvD,IAAIK,EAAK,GAAMpE,EAAKA,EAAKC,EAAKA,EAC9B,GAAImE,GAAM,EACV,CACI,IAAMC,EAA2C,EAArCpB,EAAUe,EAAKT,EAAKR,EAAKkB,EAAKT,IAE1CE,GADAU,GAAMA,GACIA,GAAMlB,EAAMmB,GAAOrE,EAAKkD,EAAMmB,EAAM,GAAKpE,GAEvD,IAAIqE,EAAK,GAAMpE,EAAKA,EAAKC,EAAKA,EAC9B,GAAImE,GAAM,EACV,CACI,IAAMC,EAAyC,EAAnCtB,EAAUe,EAAK,EAAIjB,EAAKkB,EAAK,IAEzCN,GADAW,GAAMA,GACIA,GAAMpB,EAAMqB,GAAOrE,EAAKgD,EAAMqB,EAAM,GAAKpE,GAIvD,OAAO,IAAQsD,EAAKC,EAAKC,wCAIjC,SAASb,EAAsBxC,GAE3B,IAAIxK,EACE8B,EAAI,IAAIoL,WAAW,KACzB,IAAKlN,EAAI,EAAGA,EAAI,IAAKA,IAEjB8B,EAAE9B,GAAKA,EAEX,IAAKA,EAAI,EAAGA,EAAI,IAAKA,IACrB,CACI,IAAMc,EAAId,EAAI,KAAOwK,KAAY,IAAMxK,IACjC0O,EAAM5M,EAAE9B,GACd8B,EAAE9B,GAAK8B,EAAEhB,GACTgB,EAAEhB,GAAK4N,EAEX,OAAO5M,EAEXgL,EAAa6B,uBAAyB3B,EAEtBF,ICtJZ8B,EAAQC,EAAKtF,EAAMF,EAAOyF,EAAOC,EAAQC,EAAMC,EAAWC,EDsJ9CpC,IErKHqC,QAAO,GACPC,EAAO,EACPC,EAAS,EDetB,IAAIC,EAAYC,EAAYC,EAAc,EAAGC,EAAQ,EAEjDC,EAAS7G,EAAO2D,cAChBX,EAAiBhD,EAAOgD,eAAe6D,GACvC5D,EAAejD,EAAOiD,aAAa4D,GAEjCC,EAAQ,IAAI7C,EAEZ8C,EAAY,EAGZC,EAAQ,IAAIxC,aAAaxE,EAAO+C,SAASkE,OAAO,SAACC,EAAEC,GAAH,OAASjN,KAAKC,IAAI+M,EAAEC,IAAI,GAAKJ,GAsBnF,SAASK,IAELC,SAASC,KAAKC,UAAY,UAAYV,EAI1C,SAASW,EAAe/L,EAASkF,EAAGC,EAAG6G,EAAGtQ,EAAGuQ,EAAQC,GAGjD,IAAMC,EAAOd,EAAMe,QAAY,KAAJlH,EAAaxJ,EAAO,KAAJyJ,GACrCkH,EAAOhB,EAAMe,QAAY,KAAJjH,EAAgB,KAAJD,GAQvCA,GAAKmH,EACLlH,GAAKkH,EAEL,IAAMjH,EAAQ+G,EAAOhI,EAErBnE,EAAQsM,OACRtM,EAAQuM,UAAUrH,EAAI,GAAIC,GAAK+G,GAAiBjB,EAAY,GAAK,KAE7DgB,GAAWC,GAEXlM,EAAQwM,OAAOpH,GAGnB,IAAM3H,EAAI8G,EAAO6C,QAAU4E,GAAKzH,EAAO8C,QAAU9C,EAAO6C,SACxDpH,EAAQyM,MAAMhP,EAAGA,GAEbwO,EAEAjM,EAAQ0M,UAAUhC,EAAM,EAAG,GAIvBwB,EAEAlM,EAAQ2M,SAAS,EAAG,EAAG,GAAI,IAI3B3M,EAAQ2M,SAAS,EAAG,EAAG,GAAI,IAGnC3M,EAAQ4M,UAIZ,SAASC,IAUL,IAPA,IAAM3H,EAAIzG,KAAKyH,UAAYsE,EAAQjG,EAAOqD,WACpCzC,EAAI1G,KAAKyH,UAAYuE,EAASQ,EAAa1G,EAAOqD,WAClDkF,EAAYnC,EAAUoC,aAAa7H,EAAGC,EAAIZ,EAAOqD,UAAWrD,EAAOqD,WAEnEoF,EAAYF,EAAUG,KAAK/O,OAE7BgP,GAAU,EACLxR,EAAI,EAAGA,EAAIsR,EAAWtR,GAAK,EACpC,CACI,IAAIc,EAAIsQ,EAAUG,KAAKvR,GACnBiF,EAAImM,EAAUG,KAAKvR,EAAI,GACrBgQ,EAAIoB,EAAUG,KAAKvR,EAAI,GAGnB,MAFAoR,EAAUG,KAAKvR,EAAI,GAIrBiF,EAAI,KAEAnE,EAAImE,EAEJnE,GAAK,IAIDA,EAAI,KAAOmE,EAAI,OAEfnE,GAAK,GAETmE,GAAK,GAETmM,EAAUG,KAAKvR,GAAKc,EACpBsQ,EAAUG,KAAKvR,EAAI,GAAKiF,EACxBuM,GAAU,GAKV9B,EAAS1E,GAAUlK,EAAIkP,EAAI/K,IAE3BmM,EAAUG,KAAKvR,EAAI,IAAM,EACzBwR,GAAU,GAKlBA,GAEAvC,EAAUwC,aAAaL,EAAW5H,EAAGC,GAK7C,SAASiI,EAAiBjQ,EAAGoM,GAC7B,IAAA8D,EACqCzC,EAAzBJ,EADZ6C,EACY7C,MAAOC,EADnB4C,EACmB5C,OAETvF,GAHVmI,EAC2BC,QAEX9C,EAAQ,GAAKrN,EAAG,GACtBgI,GAAMsF,EAAS,GAAKlB,EAAI,EAI9B,OAAOqB,EAAa0C,OAAO9C,EAAQrF,EAAID,GAG3C,SAASqI,KAIL,IAHJ,IACWlF,EAAwB9D,EAAxB8D,YAAaZ,EAAWlD,EAAXkD,QAEX/L,EAAI,EAAGA,EAAI6I,EAAO6D,WAAY1M,IACvC,CAEI,IAAMwJ,EAAKzG,KAAKyH,SAAWsE,EAAS,EAC9BwB,EAAIvN,KAAKyH,SAETsH,GAAa/C,EAAShD,EAAW,GAAKwD,EAEtC9F,EAAKqI,GAAYxC,EAAWP,OAAS+C,GAAYxB,EAAK,EAEtDyB,EAAapC,EAAMe,QAAY,IAAJlH,EAAoB,KAATC,EAAIzJ,IAE1CgS,EAAmBtC,IAAW5E,EAAS/H,KAAKkP,IAAI,EAAiB,EAAdzC,EAAkB3G,EAAOsD,cAAgB,EAC5F+F,GAAe,GAA4C,GAAtCvC,EAAMe,QAAY,KAAJlH,EAAgB,IAALC,IAAoBuI,EAClEG,EAAKxC,EAAMe,QAAY,KAAJlH,EAAiB,KAALC,GAC/B2I,EAAKrP,KAAKyH,SAEVd,EAAQjB,EAAM,EAAIsJ,EAAatJ,EAAM,GAAKA,EAAM,GAEtDwG,EAAUoD,YAAcX,EAAiBU,EAAID,GAC7ClD,EAAUqD,UAAY,EAAQ,EAAJhC,EAE1BrB,EAAUsD,YACVtD,EAAUuD,OAAOhJ,EAAGC,GACpBwF,EAAUwD,OAAOjJ,EAAIzG,KAAKgH,IAAIL,GAASiD,EAAcuF,EAAazI,EAAI1G,KAAKkH,IAAIP,GAASiD,EAAcuF,GACtGjD,EAAUyD,SAEdzD,EAAU0D,QAAU,EAIxB,SAASC,KACT,IACYnH,EAAwF5C,EAAxF4C,QAASM,EAA+ElD,EAA/EkD,QAASM,EAAsExD,EAAtEwD,YAAaD,EAAyDvD,EAAzDuD,cAAeE,EAA0CzD,EAA1CyD,aAAcC,EAA4B1D,EAA5B0D,WAAYJ,EAAgBtD,EAAhBsD,eAEhFqD,EACkBrD,IAEdqD,EAAc,EACdE,EAAUA,EAAS,EAAK,EAExBO,KATR,IAAA4C,EAY2BtJ,EAAhBN,EAZX4J,EAYW5J,OAAQC,EAZnB2J,EAYmB3J,KAET4J,EAAOpO,KAAKzC,MAAQoH,EAE1BwF,EAAIkE,UAAU,EAAG,EAAGjE,EAAOC,GAE3BF,EAAImE,UAAY,UAChBnE,EAAI0D,YAEJ,IAAMU,EAAkC,IAA1BlQ,KAAKgH,IAAW,KAAP+I,GACjBI,EAAkC,GAA1BnQ,KAAKgH,IAAW,KAAP+I,GAEvBjE,EAAI2D,OAAOvJ,EAAO,GAAIA,EAAO,IAE7B,IAAK,IAAIjJ,EAAI,EAAGA,EAAIiJ,EAAOzG,OAAQxC,GAAK,EACxC,CAEI,IAAMwJ,EAAIP,EAAOjJ,GACXyJ,EAAIR,EAAOjJ,EAAI,GACf2J,EAAQV,EAAOjJ,EAAI,GAEnBmT,EAASxD,EAAMe,QAAY,KAAJlH,EAAmB,KAAPsJ,EAAmB,KAAJrJ,IAAsB,IAARE,GAEtEkF,EAAI4D,OAAQjJ,EAAIyJ,EAAQE,EAAU1J,EAAIyJ,EAAQC,GAKlD,GAFAtE,EAAIuE,OAEA1D,IAAWzE,EACf,CACI,IAAIoI,EAAWC,EAQf,GANI5D,IAAW3E,IAEXsI,EAAYxK,EAAOuD,cACnBkH,EAAezK,EAAOwD,aAGtBqD,IAAW1E,EACf,CACI,IAAMuI,EAAcxQ,KAAKC,IAAKwM,EAAcrD,EAAgB,EAAI,EAAG,GACnEkH,EAAYjH,GAAiBA,EAAgBE,GAAgBiH,EAC7DD,EAAejH,GAAeA,EAAcE,GAAcgH,EAG9D,GAAI7D,IAAW5E,EACf,CACI,IAAMyI,EAAc,EAAIxQ,KAAKkP,IAAKzC,EAAcrD,EAAgB,EAAG,GACnEkH,EAAYjH,GAAiBA,EAAgBE,GAAgBiH,EAC7DD,EAAejH,GAAeA,EAAcE,GAAcgH,EAG9D1E,EAAImE,UAAY,kBAAoBM,EAAe,IACnD,IAAK,IAAItT,EAAI,EAAGA,EAAIkJ,EAAK1G,OAAQxC,IACjC,CACI,IAAMwT,EAAMtK,EAAKlJ,GAEjB6O,EAAI0D,YACJ1D,EAAI2D,OAAOgB,EAAIhK,EAAGgK,EAAI/J,GAEtB,IAAM0J,EAASxD,EAAMe,QAAgB,KAAR8C,EAAIhK,EAAmB,KAAPsJ,EAAuB,KAARU,EAAI/J,GAAaqC,EAE7E+C,EAAI4E,IAAKD,EAAIhK,EAAIyJ,EAAQE,EAAUK,EAAI/J,EAAIyJ,EAAQC,EAASE,EAAW,EAAG5K,GAAK,GAC/EoG,EAAIuE,QAMZ,GAFAnE,EAAU+D,UAAYnE,EAAImE,UAAY,wBAElCtD,IAAW3E,EAGX,IADA,IAAM2I,EAAqB7K,EAAO+C,SAAS8D,GAAUE,EAC5C5P,GAAI,EAAGA,GAAI0T,EAAoB1T,IAAK4P,EAC7C,CACI,IAAIpG,GAAIqG,EAAM7P,IAAKiT,EAAQpH,EACvByE,GAAIT,EAAM7P,GAAI,GACdyJ,GAAIoG,EAAM7P,GAAI,GACd2T,GAAO9D,EAAM7P,GAAI,GAErB,GAAI2T,KAAStE,EAET,GAAIK,IAAW1E,EAEX2I,GAAO9D,EAAM7P,GAAI,GAAKmP,MAErB,IAAIO,IAAWzE,EAMhB,SAJA0I,GAAO9D,EAAM7P,GAAI,GAAKoP,EAQ9B,IAAMmB,GAASoD,KAASxE,EAElByE,GAAkB,GAAJtD,GAqBpB,GAlBI9G,IAAK,KAELA,IAAKsF,EAAQ,KAIbtF,GAAIsF,EAAQ,KAEZtF,IAAKsF,EAAQ,MAVjBrF,IAAK,EAAIgC,EAAUmI,GAAcV,EAAQrH,EAAiB+H,IAYlD7E,EAAS,KAEbtF,IAAKsF,EAAS,KAGlBc,EAAM7P,IAAKwJ,GACXqG,EAAM7P,GAAI,GAAKyJ,GAEXA,IAAK,GACT,CACI,IAAMqI,GAAY/C,EAAShD,EAAU,GAAI,EACnCyE,GAAe/G,GAAIqI,IAAY/C,EAAS+C,IAAYxB,GAG1DD,EADgBG,GAAevB,EAAYJ,EACnBrF,GAAGC,GAAG6G,GAAGtQ,GAAGuQ,GAAQC,IAExCA,KAEAX,EAAM7P,IAAK+C,KAAKyH,SAAWsE,EAEvBY,IAAWzE,GAGX4E,EAAM7P,GAAI,GAAKuQ,GAAUxN,KAAKyH,UAAYuE,EAASA,GAAU,GAC7Dc,EAAM7P,GAAI,GAAKoP,GAEVmB,IAAUd,EAAQ5G,EAAOmD,YAE1ByD,KAGCC,IAAW1E,GAEhB6E,EAAM7P,GAAI,IAAM,GAChB6P,EAAM7P,GAAI,GAAKmP,IAIfU,EAAM7P,GAAI,GAAK+C,KAAKyH,UAAYuE,EAASA,EACzCc,EAAM7P,GAAI,GAAKqP,KAYnC,GAAIK,IAAW1E,EACf,CACI,IAAK,IAAIhL,GAAI,EAAGA,GAAI6I,EAAOoD,UAAWjM,KAElCmR,IAEJ1B,EAAQ,EAGRC,IAAWzE,GAAUwE,GAAS5G,EAAOmD,YAAoC,IAAP,EAAdwD,KAEpDP,EAAU+D,UAAY,0BACtB/D,EAAUgC,SAAS,EAAE,GAAGnC,EAAMQ,EAAWP,OAAS,KAGlDW,IAAW5E,IAEP2E,GAAS,GAETR,EAAU4E,YAAc,EACxBhC,MAIApC,GAAS,IAKjB3D,GAA+D,KAA9CjD,EAAOiD,aAAa4D,GAAU5D,GAC/CD,GAAqE,KAAlDhD,EAAOgD,eAAe6D,GAAU7D,GAEnDvJ,IAAIsQ,IAIR,IAAMkB,GAAuB9P,IAAS,WA8BlC,GA7BA8K,EAAS3M,OAAO4R,WAAa,EAAK,EAClChF,EAAU5M,OAAO6R,YAAc,EAAK,EAlYxC,WAMI,IALJ,IACYpI,EAA4B/C,EAA5B+C,SAAUY,EAAkB3D,EAAlB2D,cAEZyH,EAAoBrI,EAASZ,GAAU4E,EAEpC5P,EAAI,EAAGA,EAAI6P,EAAMrN,OAAQxC,GAAK4P,EACvC,CACIC,EAAM7P,GAAK+C,KAAKyH,SAAWsE,EAE3B,IAAMoF,EAAQ1H,EAAgBxB,EAAS,EAAIhL,EAAKiU,EAAoB,GAAM,EAE1EpE,EAAM7P,EAAI,GAAK+C,KAAKyH,UAAYuE,EAASmF,EAAQnF,EACjDc,EAAM7P,EAAI,GAAK+C,KAAKyH,SACpBqF,EAAM7P,EAAI,GAAKwM,EAAgBxB,EAASqE,EAAS7C,IAAkBxB,GAAUhL,EAAIiU,EAAoB9E,EAAOC,GAsXhH+E,GAEAvF,EAAOE,MAAQA,EACfF,EAAOG,OAASA,EAGhBQ,EAAcR,EAASlG,EAAOkD,QAAU,GAAM,EAE9CqI,QAAQC,IAAI,SAAUvF,EAAO,IAAKC,EAAQ,aAAcQ,GAExDD,EAAWR,MAAQA,EACnBQ,EAAWP,OAASA,EAASQ,EAE7BD,EAAWgF,MAAMC,IAAMhF,EAAa,KAEpCN,EAAU+D,UAAY,yBACtB/D,EAAUgC,SAAS,EAAG,GAAInC,EAAOQ,EAAWP,QAE5ClG,EAAOQ,MAAM,GAAKyF,EAAQ,EAC1BjG,EAAOQ,MAAM,GAAc,IAAT0F,EAElBxF,EAAO,IAAIX,EAAKC,GAEhB2G,EAAc,GACdE,EAAS7G,EAAO2D,iBAED1B,EAEX,IAAK,IAAI9K,EAAI,EAAGA,EAAI6I,EAAOsD,aAAe,EAAGnM,IAEzC6R,UAKJ5C,EAAU+D,UAAY,yBACtB/D,EAAUgC,SAAS,EAAE,GAAGnC,EAAMQ,EAAWP,OAAS,IAElDU,EAAQ5G,EAAOmD,YAIpB,KAAK,GAER7J,OAAOqS,OAAS,WACZvE,IAEArB,EAASsB,SAASuE,eAAe,UACjCzF,EAAOkB,SAASuE,eAAe,QAC/BvF,EEpdW,SAA0BwF,GAErC,IAAM9F,EAASsB,SAASyE,cAAc,UAChC7F,EAAQ4F,EAAI5F,MACZC,EAAS2F,EAAI3F,OACnBH,EAAOE,MAAQA,EACfF,EAAOG,OAASA,EAChBH,EAAOwB,UAAU,YAEjBF,SAASC,KAAKyE,YAAYhG,GAC1B,IAAMC,EAAMD,EAAOiG,WAAW,MAC9BhG,EAAImC,UAAU0D,EAAK,EAAI,GAEvB,IAAMtD,EAAYvC,EAAIwC,aAAa,EAAG,EAAGvC,EAAOC,GAEhDmB,SAASC,KAAK2E,YAAYlG,GAS1B,IANA,IAAMgD,EAAS,IAAIzK,MAAM2H,EAAQC,GAE3BuD,EAA8B,EAAlBlB,EAAUtC,MACtByC,EAAOH,EAAUG,KAEnBwD,EAAQ,EACJtL,EAAI,EAAGA,EAAIsF,EAAQtF,IAEvB,IAAI,IAAID,EAAI,EAAGA,EAAIsF,EAAOtF,IAC1B,CACI,IAAM3B,EAAM4B,EAAI6I,EAAgB,EAAJ9I,EAC5BoI,EAAOmD,KAAW,QAAUxD,EAAK1J,GAAO,IAAO0J,EAAK1J,EAAM,GAAK,IAAO0J,EAAK1J,EAAM,GAAK,UAI9F,MAAO,CACHiH,QACAC,SACA6C,UFgbWoD,CAAiB9E,SAASuE,eAAe,UAExDL,QAAQC,IAAI,CAACnF,iBAEbL,EAAMD,EAAOiG,WAAW,OAExBvF,EAAaY,SAASyE,cAAc,WACzBjS,GAAK,KAEhBuM,EAAYK,EAAWuF,WAAW,MAElCf,KAGA5D,SAASC,KAAKyE,YAAYtF,GAE1BnN,OAAO8S,iBAAiB,SAAUnB,IAAsB,GAExDzK,EAAQ3E,KAAKzC,MACbK,IAAIsQ","file":"bundle-tree-anim-e49058b76d758126f644.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function(object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf\n  object.cancelAnimationFrame = caf\n}\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n//# sourceMappingURL=performance-now.js.map\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\nexport const TAU = Math.PI * 2;\n","\nimport { TAU } from \"./math\";\n\nconst RIGHT_ANGLE = TAU / 4;\n\nfunction collectPoints(tree, x, y, angle, depth)\n{\n\n    const { angle : angleDelta, segments, radiuses } = tree.config;\n\n    const upX = Math.cos( angle) * segments[depth];\n    const upY = Math.sin( angle) * segments[depth];\n\n    const x1 = x + Math.cos( angle - RIGHT_ANGLE) * radiuses[depth];\n    const y1 = y + Math.sin( angle - RIGHT_ANGLE) * radiuses[depth];\n    const x2 = x + upX + Math.cos( angle - RIGHT_ANGLE) * radiuses[depth + 1];\n    const y2 = y + upY + Math.sin( angle - RIGHT_ANGLE) * radiuses[depth + 1];\n\n    const nextDepth = depth + 1;\n    tree.points.push(\n        x1,y1, depth,\n        x2,y2, nextDepth\n    );\n\n    if (nextDepth < segments.length - 1)\n    {\n\n        const angleLeft = angle - angleDelta * (0.5 + Math.random() * 0.5);\n        const angleRight = angle + angleDelta * (0.5 + Math.random() * 0.5);\n\n        collectPoints(tree, x + upX, y + upY, angleLeft, nextDepth);\n        collectPoints(tree, x + upX, y + upY, angleRight, nextDepth);\n    }\n\n\n    if (nextDepth === segments.length - 2)\n    {\n        tree.tips.push(\n            {\n                x:x + upX,\n                y:y + upY\n            }\n        )\n    }\n\n    const x4 = x + Math.cos( angle + RIGHT_ANGLE) * radiuses[depth];\n    const y4 = y + Math.sin( angle + RIGHT_ANGLE) * radiuses[depth];\n    const x3 = x + upX + Math.cos( angle + RIGHT_ANGLE) * radiuses[depth + 1];\n    const y3 = y + upY + Math.sin( angle + RIGHT_ANGLE) * radiuses[depth + 1];\n\n    tree.points.push(\n        x3,y3, nextDepth,\n        x4,y4, depth\n    );\n\n}\n\nexport default class Tree\n{\n    constructor(config)\n    {\n        this.config = config;\n\n\n        const { segments, radiuses } = config;\n\n        if (segments.length !== radiuses.length)\n        {\n            throw new Error(\"segments and radiuses must have the same number of elements\");\n        }\n\n        segments.push(segments[segments.length - 1]);\n        radiuses.push(1);\n\n        this.points = [];\n        this.tips = [];\n\n        const [ x, y, angle] = config.start;\n\n        collectPoints(this, x, y, angle, 0);\n\n    }\n\n}\n","export const SPRING = 0;\nexport const SUMMER = 1;\nexport const AUTUMN = 2;\nexport const WINTER = 3;\n\nconst SEASON_FOR_MONTH = [\n    WINTER,\n    WINTER,\n    SPRING,\n    SPRING,\n    SPRING,\n    SUMMER,\n    SUMMER,\n    SUMMER,\n    AUTUMN,\n    AUTUMN,\n    AUTUMN,\n    WINTER,\n];\n\nexport function getCurrentSeason()\n{\n    return SEASON_FOR_MONTH[ new Date().getMonth()];\n}\n","import { TAU } from \"./math\";\nimport { SPRING, SUMMER, AUTUMN, WINTER, getCurrentSeason } from \"./seasons\";\n\nconst r = (1+Math.sqrt(5))/2;\nconst r2 = r*r;\nconst r3 = r*r*r;\nconst r4 = r*r*r*r;\nconst r5 = r*r*r*r*r;\n\nconst LEN = 200;\nconst WIDTH = 40;\n\nexport  default {\n\n    // trees are drawn inside [0,0 ... 1000,1000], this renders it a bit higher for design reasons\n    viewBox: \"0 15 1000 1000\",\n\n    start: [500,1000, -TAU / 4],\n\n    angle: TAU * 0.125,\n\n    segments: [ LEN, LEN /r, LEN / r2, LEN / r3, LEN/ r4, LEN/r5],\n    radiuses: [ WIDTH, WIDTH /r, WIDTH / r2, WIDTH / r3, WIDTH/ r4, WIDTH/r5],\n\n    gravity: 4,\n\n    minLeaf: 0.2,\n    maxLeaf: 0.6,\n    \n    numLeafs: [500,100, 100, 500],\n    leafWindFactor: [0.01,0.01,0.05,0.02],\n\n    windStrength: [ 0.2, 0.1, 0.5, 0.01],\n    horizon: 0.61,\n\n    frostLimit: 80,\n    \n    // setting this higher might slow the simulation down\n    decayRate: 13,\n\n    decaySize: 40,\n    \n    seasonLength: 60 * 45,\n\n    fullCrownSize: 75,\n    fullOpacity: 0.4,\n    minCrownSize: 8,\n    minOpacity: 0.3,\n\n    initialSeason: getCurrentSeason(),\n\n    grassCount: 100,\n    grassLength: 50\n}\n","/*\n * A fast javascript implementation of simplex noise by Jonas Wagner\n *\n * Based on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.\n * Which is based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * With Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n *\n *\n * Copyright (C) 2016 Jonas Wagner\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n */\n\n// Code take from NPM module \"simplex-noise\", but only the noise2D code\n\nconst F2 = 0.5 * (Math.sqrt(3.0) - 1.0);\nconst G2 = (3.0 - Math.sqrt(3.0)) / 6.0;\n\nclass SimplexNoise {\n    constructor(random)\n    {\n        if (!random)\n        {\n            random = Math.random;\n        }\n        this.p = buildPermutationTable(random);\n        this.perm = new Uint8Array(512);\n        this.permMod12 = new Uint8Array(512);\n        for (let i = 0; i < 512; i++)\n        {\n            this.perm[i] = this.p[i & 255];\n            this.permMod12[i] = this.perm[i] % 12;\n        }\n        this.grad3 = new Float32Array([1, 1, 0,\n            -1, 1, 0,\n            1, -1, 0,\n\n            -1, -1, 0,\n            1, 0, 1,\n            -1, 0, 1,\n\n            1, 0, -1,\n            -1, 0, -1,\n            0, 1, 1,\n\n            0, -1, 1,\n            0, 1, -1,\n            0, -1, -1]);\n        this.grad4 = new Float32Array([0, 1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1,\n            0, -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1,\n            1, 0, 1, 1, 1, 0, 1, -1, 1, 0, -1, 1, 1, 0, -1, -1,\n            -1, 0, 1, 1, -1, 0, 1, -1, -1, 0, -1, 1, -1, 0, -1, -1,\n            1, 1, 0, 1, 1, 1, 0, -1, 1, -1, 0, 1, 1, -1, 0, -1,\n            -1, 1, 0, 1, -1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, -1,\n            1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1, 0,\n            -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1, 0]);\n\n    }\n\n    noise2D(xin, yin)\n    {\n        const permMod12 = this.permMod12;\n        const perm = this.perm;\n        const grad3 = this.grad3;\n        let n0 = 0; // Noise contributions from the three corners\n        let n1 = 0;\n        let n2 = 0;\n        // Skew the input space to determine which simplex cell we're in\n        const s = (xin + yin) * F2; // Hairy factor for 2D\n        const i = Math.floor(xin + s);\n        const j = Math.floor(yin + s);\n        const t = (i + j) * G2;\n        const X0 = i - t; // Unskew the cell origin back to (x,y) space\n        const Y0 = j - t;\n        const x0 = xin - X0; // The x,y distances from the cell origin\n        const y0 = yin - Y0;\n        // For the 2D case, the simplex shape is an equilateral triangle.\n        // Determine which simplex we are in.\n        let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n        if (x0 > y0)\n        {\n            i1 = 1;\n            j1 = 0;\n        } // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n        else\n        {\n            i1 = 0;\n            j1 = 1;\n        } // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n        // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n        // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n        // c = (3-sqrt(3))/6\n        const x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n        const y1 = y0 - j1 + G2;\n        const x2 = x0 - 1.0 + 2.0 * G2; // Offsets for last corner in (x,y) unskewed coords\n        const y2 = y0 - 1.0 + 2.0 * G2;\n        // Work out the hashed gradient indices of the three simplex corners\n        const ii = i & 255;\n        const jj = j & 255;\n        // Calculate the contribution from the three corners\n        let t0 = 0.5 - x0 * x0 - y0 * y0;\n        if (t0 >= 0)\n        {\n            const gi0 = permMod12[ii + perm[jj]] * 3;\n            t0 *= t0;\n            n0 = t0 * t0 * (grad3[gi0] * x0 + grad3[gi0 + 1] * y0); // (x,y) of grad3 used for 2D gradient\n        }\n        let t1 = 0.5 - x1 * x1 - y1 * y1;\n        if (t1 >= 0)\n        {\n            const gi1 = permMod12[ii + i1 + perm[jj + j1]] * 3;\n            t1 *= t1;\n            n1 = t1 * t1 * (grad3[gi1] * x1 + grad3[gi1 + 1] * y1);\n        }\n        let t2 = 0.5 - x2 * x2 - y2 * y2;\n        if (t2 >= 0)\n        {\n            const gi2 = permMod12[ii + 1 + perm[jj + 1]] * 3;\n            t2 *= t2;\n            n2 = t2 * t2 * (grad3[gi2] * x2 + grad3[gi2 + 1] * y2);\n        }\n        // Add contributions from each corner to get the final noise value.\n        // The result is scaled to return values in the interval [-1,1].\n        return 70.0 * (n0 + n1 + n2);\n    }\n}\n\nfunction buildPermutationTable(random)\n{\n    let i;\n    const p = new Uint8Array(256);\n    for (i = 0; i < 256; i++)\n    {\n        p[i] = i;\n    }\n    for (i = 0; i < 255; i++)\n    {\n        const r = i + 1 + ~~(random() * (255 - i));\n        const aux = p[i];\n        p[i] = p[r];\n        p[r] = aux;\n    }\n    return p;\n}\nSimplexNoise._buildPermutationTable = buildPermutationTable;\n\nexport  default SimplexNoise\n","import Tree from \"./Tree\";\nimport debounce from \"debounce\";\nimport raf from \"raf\";\n\nimport config from \"./config\"\nimport SimplexNoise from \"./noise\"\nimport { TAU } from \"./math\";\n// noinspection ES6UnusedImports\nimport STYLE from \"./style.css\"\n\nimport { AUTUMN, SPRING, SUMMER, WINTER } from \"./seasons\";\nimport { LEAF, LOCKED, SNOW } from \"./particle-modes\";\nimport loadGrassPalette from \"./loadGrassPalette\";\n\n\nlet canvas, ctx, tree, start, width, height, leaf, bgContext, grassPalette;\n\nlet background, decayStart, seasonCount = 0, frost = 0;\n\nlet season = config.initialSeason;\nlet leafWindFactor = config.leafWindFactor[season];\nlet windStrength = config.windStrength[season];\n\nconst noise = new SimplexNoise();\n\nconst LEAF_SIZE = 4;\nconst LEAF_SCALE = 0.5;\n\nconst leafs = new Float32Array(config.numLeafs.reduce((a,b) => Math.max(a,b), 0) * LEAF_SIZE);\n\n\nfunction initLeafs()\n{\n    const { numLeafs, initialSeason } = config;\n\n    const autommLeavesCount = numLeafs[AUTUMN] * LEAF_SIZE;\n\n    for (let i = 0; i < leafs.length; i += LEAF_SIZE)\n    {\n        leafs[i] = Math.random() * width;\n\n        const space = initialSeason < AUTUMN ? 1 : i <  autommLeavesCount ? 0.5 : 1;\n\n        leafs[i + 1] = Math.random() * -height - space * height ;\n        leafs[i + 2] = Math.random();\n        leafs[i + 3] = initialSeason < AUTUMN ? LOCKED : initialSeason === AUTUMN && i < autommLeavesCount ? LEAF : SNOW;\n    }\n}\n\n\nfunction updateSeason()\n{\n    document.body.className = \"season-\" + season;\n}\n\n\nfunction drawLeafOrSnow(context, x, y, z, i, isLeaf, didHitGround)\n{\n\n    const rnd0 = noise.noise2D(x * 0.0001 + i, y * 0.001);\n    const rnd1 = noise.noise2D(y * 0.0001, x * 0.001);\n\n    // const dx = noise.noise2D( y, x);\n    // const dy = noise.noise2D( x, y);\n    //\n    // x += dx;\n    // y += dy;\n\n    x += rnd1;\n    y -= rnd1;\n\n    const angle = rnd0 * TAU;\n\n    context.save();\n    context.translate(x - 32, y + (didHitGround ? - decayStart: 0) - 18);\n\n    if (isLeaf || !didHitGround)\n    {\n        context.rotate(angle);\n\n    }\n    const s = config.minLeaf + z * (config.maxLeaf - config.minLeaf);\n    context.scale(s, s);\n\n    if (isLeaf)\n    {\n        context.drawImage(leaf, 0, 0);\n    }\n    else\n    {\n        if (didHitGround)\n        {\n            context.fillRect(0, 0, 48, 10);\n        }\n        else\n        {\n            context.fillRect(0, 0, 24, 24);\n        }\n    }\n    context.restore();\n}\n\n\nfunction decayBackground()\n{\n\n    const x = Math.random() * (width - config.decaySize);\n    const y = Math.random() * (height - decayStart - config.decaySize);\n    const imageData = bgContext.getImageData(x, y,  config.decaySize, config.decaySize);\n\n    const dataWidth = imageData.data.length;\n\n    let changed = false;\n    for (let i = 0; i < dataWidth; i += 4)\n    {\n        let r = imageData.data[i];\n        let g = imageData.data[i + 1];\n        const b = imageData.data[i + 2];\n        const a = imageData.data[i + 3];\n\n        if (a === 255)\n        {\n            if (g > 66)\n            {\n                if (r < g)\n                {\n                    r += 6;\n                }\n                else\n                {\n                    if (r > 140 || g < 120)\n                    {\n                        r -= 1;\n                    }\n                    g -= 1;\n                }\n                imageData.data[i] = r;\n                imageData.data[i + 1] = g;\n                changed = true;\n            }\n        }\n        else\n        {\n            if (season < AUTUMN && r + b > g)\n            {\n                imageData.data[i + 3] -= 8;\n                changed = true;\n            }\n        }\n    }\n\n    if (changed)\n    {\n        bgContext.putImageData(imageData, x, y);\n    }\n}\n\n\nfunction lookupGrassStyle(n, n2)\n{\n    const { width, height, colors} = grassPalette;\n\n    const x = ((width - 1) * n)|0;\n    const y = ((height - 1) * n2)|0;\n\n    //console.log(\"lookupGrassStyle\", n, n2, x, y);\n\n    return grassPalette.colors[width * y + x];\n}\n\nfunction drawGrass()\n{\n    const {grassLength, horizon} = config;\n\n    for (let i = 0; i < config.grassCount; i++)\n    {\n\n        const x = (Math.random() * width) | 0;\n        const z = Math.random();\n\n        const horizonY = ((height * horizon) | 0) - decayStart;\n\n        const y = (horizonY + (background.height - horizonY) * z) | 0;\n\n        const angleNoise = noise.noise2D(x * 0.01, (y + i )* 0.01);\n\n        const seasonMultiplier = season === SPRING ? Math.min(1, seasonCount * 3 / config.seasonLength) : 1;\n        const lengthNoise = (0.5 + noise.noise2D(x * 0.004, y  * 0.04) * 0.7) * seasonMultiplier;\n        const c2 = noise.noise2D(x * 0.0005, y  * 0.004);\n        const c1 = Math.random();\n\n        const angle = TAU / 4 + angleNoise * TAU / 16 - TAU / 32;\n\n        bgContext.strokeStyle = lookupGrassStyle(c1, c2);\n        bgContext.lineWidth = 1 + z * 3;\n\n        bgContext.beginPath();\n        bgContext.moveTo(x, y);\n        bgContext.lineTo(x + Math.cos(angle) * grassLength * lengthNoise, y + Math.sin(angle) * grassLength * lengthNoise);\n        bgContext.stroke();\n    }\n    bgContext.opacity = 1;\n}\n\n\nfunction render()\n{\n    const { gravity, horizon, fullOpacity, fullCrownSize, minCrownSize, minOpacity, seasonLength} = config;\n\n    seasonCount++;\n    if (seasonCount > seasonLength)\n    {\n        seasonCount = 0;\n        season = (season + 1) & 3;\n\n        updateSeason();\n    }\n\n    const {points, tips} = tree;\n\n    const time = Date.now() - start;\n\n    ctx.clearRect(0, 0, width, height);\n\n    ctx.fillStyle = \"#90482a\";\n    ctx.beginPath();\n\n    const windX = Math.cos(time * 0.0003) * 100;\n    const windY = Math.cos(time * 0.0007) * 60;\n\n    ctx.moveTo(points[0], points[1]);\n\n    for (let i = 3; i < points.length; i += 3)\n    {\n\n        const x = points[i];\n        const y = points[i + 1];\n        const depth = points[i + 2];\n\n        const factor = noise.noise2D(x * 0.001 + time * 0.0005, y * 0.001) * (depth * 0.05);\n\n        ctx.lineTo((x + windX * factor), (y + windY * factor));\n    }\n\n    ctx.fill();\n\n    if (season !== WINTER)\n    {\n        let crownSize, crownOpacity;\n\n        if (season === SUMMER)\n        {\n            crownSize = config.fullCrownSize;\n            crownOpacity = config.fullOpacity;\n        }\n\n        if (season === AUTUMN)\n        {\n            const seasonRatio = Math.max((seasonCount / seasonLength) * 2 - 1, 0);\n            crownSize = fullCrownSize - (fullCrownSize - minCrownSize) * seasonRatio;\n            crownOpacity = fullOpacity - (fullOpacity - minOpacity) * seasonRatio;\n        }\n\n        if (season === SPRING)\n        {\n            const seasonRatio = 1 - Math.min((seasonCount / seasonLength) * 2, 1);\n            crownSize = fullCrownSize - (fullCrownSize - minCrownSize) * seasonRatio;\n            crownOpacity = fullOpacity - (fullOpacity - minOpacity) * seasonRatio;\n        }\n\n        ctx.fillStyle = \"rgba(10,160,60,\" + crownOpacity + \")\";\n        for (let i = 0; i < tips.length; i++)\n        {\n            const tip = tips[i];\n\n            ctx.beginPath();\n            ctx.moveTo(tip.x, tip.y);\n\n            const factor = noise.noise2D(tip.x * 0.001 + time * 0.0005, tip.y * 0.001) * windStrength;\n\n            ctx.arc((tip.x + windX * factor), (tip.y + windY * factor), crownSize, 0, TAU, false);\n            ctx.fill();\n        }\n    }\n\n    bgContext.fillStyle = ctx.fillStyle = \"rgba(255,255,255,0.9)\";\n\n    if (season !== SUMMER)\n    {\n        const particlesPerSeason = config.numLeafs[season] * LEAF_SIZE;\n        for (let i = 0; i < particlesPerSeason; i += LEAF_SIZE)\n        {\n            let x = leafs[i] + windX * leafWindFactor;\n            let z = leafs[i + 2];\n            let y = leafs[i + 1];\n            let code = leafs[i + 3];\n\n            if (code === LOCKED)\n            {\n                if (season === AUTUMN)\n                {\n                    code = leafs[i + 3] = LEAF;\n                }\n                else if (season === WINTER)\n                {\n                    code = leafs[i + 3] = SNOW;\n                }\n                else\n                {\n                    continue;\n                }\n            }\n\n            const isLeaf = code === LEAF;\n\n            const depthFactor = z * 0.5;\n            y += 2 + gravity * depthFactor + windY * leafWindFactor * depthFactor;\n\n            if (x < -64)\n            {\n                x += width + 128;\n            }\n\n\n            if (x > width + 64)\n            {\n                x -= width + 128;\n            }\n            if (y > height + 64)\n            {\n                y -= height + 192;\n            }\n\n            leafs[i] = x;\n            leafs[i + 1] = y;\n\n            if (y > -64)\n            {\n                const horizonY = (height * horizon + 32)|0;\n                const didHitGround = y > horizonY + (height - horizonY) * z;\n\n                const context = didHitGround ? bgContext : ctx;\n                drawLeafOrSnow(context, x, y, z, i, isLeaf, didHitGround);\n\n                if (didHitGround)\n                {\n                    leafs[i] = Math.random() * width;\n\n                    if (season === WINTER)\n                    {\n                        // give a little extra space when switching to snow\n                        leafs[i + 1] = isLeaf  ? Math.random() * -height - height : -32;\n                        leafs[i + 3] = SNOW;\n\n                        if (!isLeaf && frost < config.frostLimit)\n                        {\n                            frost++;\n                        }\n                    }\n                    else if (season === AUTUMN)\n                    {\n                        leafs[i + 1] = -32;\n                        leafs[i + 3] = LEAF;\n                    }\n                    else\n                    {\n                        leafs[i + 1] = Math.random() * -height - height;\n                        leafs[i + 3] = LOCKED;\n                    }\n                }\n            }\n        }\n    }\n\n    // ctx.beginPath();\n    // ctx.moveTo(0,config.horizon * height);\n    // ctx.lineTo(width,config.horizon * height);\n    // ctx.stroke();\n\n    if (season === AUTUMN)\n    {\n        for (let i = 0; i < config.decayRate; i++)\n        {\n            decayBackground();\n        }\n        frost = 0;\n    }\n\n    if (season === WINTER && frost >= config.frostLimit && (seasonCount & 3) === 0)\n    {\n        bgContext.fillStyle = \"rgba(255,255,255,0.006)\";\n        bgContext.fillRect(0,32,width,background.height - 32);\n    }\n\n    if (season === SPRING)\n    {\n        if (frost <= 0)\n        {\n            bgContext.strokeWidth = 2;\n            drawGrass();\n        }\n        else\n        {\n            frost -= 0.3;\n        }\n    }\n\n\n    windStrength += (config.windStrength[season] - windStrength) * 0.05;\n    leafWindFactor += (config.leafWindFactor[season] - leafWindFactor) * 0.05;\n\n    raf(render)\n}\n\n\nconst resizeCanvasToScreen = debounce(() => {\n    width = (window.innerWidth - 1) | 0;\n    height = (window.innerHeight - 1) | 0;\n\n    initLeafs();\n\n    canvas.width = width;\n    canvas.height = height;\n\n    // reset our decay line to the current horizon plus safety\n    decayStart = (height * config.horizon - 32) | 0;\n\n    console.log(\"size: \", width, \"x\", height, \"decayStart\", decayStart);\n\n    background.width = width;\n    background.height = height - decayStart;\n\n    background.style.top = decayStart + \"px\";\n\n    bgContext.fillStyle = \"rgba(53, 104, 45, 0.9)\";\n    bgContext.fillRect(0, 40, width, background.height);\n\n    config.start[0] = width / 2;\n    config.start[1] = height * 0.75;\n\n    tree = new Tree(config);\n\n    seasonCount = 0;\n    season = config.initialSeason;\n\n    if (season !== SPRING)\n    {\n        for (let i = 0; i < config.seasonLength / 3; i++)\n        {\n            drawGrass();\n        }\n    }\n    else\n    {\n        bgContext.fillStyle = \"rgba(255,255,255,0.95)\";\n        bgContext.fillRect(0,32,width,background.height - 32);\n\n        frost = config.frostLimit;\n    }\n\n\n}, 150, true);\n\nwindow.onload = () => {\n    updateSeason();\n\n    canvas = document.getElementById(\"screen\");\n    leaf = document.getElementById(\"leaf\");\n    grassPalette = loadGrassPalette(document.getElementById(\"grass\"));\n\n    console.log({grassPalette})\n\n    ctx = canvas.getContext(\"2d\");\n\n    background = document.createElement(\"canvas\");\n    background.id = \"bg\";\n\n    bgContext = background.getContext(\"2d\");\n\n    resizeCanvasToScreen();\n\n\n    document.body.appendChild(background);\n\n    window.addEventListener(\"resize\", resizeCanvasToScreen, true);\n\n    start = Date.now();\n    raf(render)\n};\n\n","export const LEAF = 0;\nexport const SNOW = 1;\nexport const LOCKED = 2;\n","export default function loadGrassPalette(img)\n{\n    const canvas = document.createElement(\"canvas\")\n    const width = img.width;\n    const height = img.height;\n    canvas.width = width;\n    canvas.height = height;\n    canvas.className=\"offscreen\";\n\n    document.body.appendChild(canvas);\n    const ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(img, 0 , 0);\n\n    const imageData = ctx.getImageData(0, 0, width, height);\n\n    document.body.removeChild(canvas);\n\n\n    const colors = new Array(width * height);\n\n    const lineWidth = imageData.width * 4;\n    const data = imageData.data;\n\n    let index = 0;\n    for(let y = 0; y < height; y++)\n    {\n        for(let x = 0; x < width; x++)\n        {\n            const off = y * lineWidth + x * 4;\n            colors[index++] = \"rgba(\" + data[off] + \",\"  + data[off + 1] + \",\"  + data[off + 2] + \", 0.99)\"\n        }\n    }\n\n    return {\n        width,\n        height,\n        colors\n    };\n}\n"],"sourceRoot":""}